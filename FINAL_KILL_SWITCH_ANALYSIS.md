# üîç –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú–´ KILL SWITCH –ò –°–ò–ì–ù–ê–õ–û–í

## üìã **–†–ï–ó–Æ–ú–ï –ü–†–û–ë–õ–ï–ú–´**

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–ª–∞ 2 –¥–Ω—è, –Ω–æ –Ω–µ –ø–æ–π–º–∞–ª–∞ –Ω–∏ –æ–¥–Ω–æ–π —Å–¥–µ–ª–∫–∏. –ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –≤—ã—è—Å–Ω–∏–ª–æ—Å—å, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏–ª–∞ —Å–∏–≥–Ω–∞–ª—ã, –Ω–æ –æ–Ω–∏ –æ—Ç–∫–ª–æ–Ω—è–ª–∏—Å—å –∏–∑-–∑–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è kill switch.

## üö® **–ù–ê–ô–î–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´**

### 1. **Kill Switch —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ**
- **–ü—Ä–æ–±–ª–µ–º–∞:** `portfolio_high_water_mark` —Å–æ—Ö—Ä–∞–Ω—è–ª—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
- **–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –¥–≤–∏–∂–∫–∞ `portfolio_high_water_mark` –º–æ–≥ –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –≤—ã—Å–æ–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å–µ—Å—Å–∏–∏
- **–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è `portfolio_high_water_mark = 0.0` –≤ `RiskMonitor.__init__()`

### 2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ max_drawdown**
- **–ü—Ä–æ–±–ª–µ–º–∞:** `max_drawdown` –º–æ–≥ –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º
- **–ü—Ä–∏—á–∏–Ω–∞:** `max_drawdown = (portfolio_high_water_mark - account_equity) / portfolio_high_water_mark`
- **–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `max(0, ...)` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

### 3. **–°–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –°–∏—Å—Ç–µ–º–∞ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∞ —Å–∏–≥–Ω–∞–ª—ã –∏–∑-–∑–∞ —Å—Ç—Ä–æ–≥–∏—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
- **–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –°–æ–∑–¥–∞–Ω—ã –±–æ–ª–µ–µ –º—è–≥–∫–∏–µ –ø—Ä–µ—Å–µ—Ç—ã:
  - `breakout_v1_relaxed.json` - —É–º–µ—Ä–µ–Ω–Ω–æ –º—è–≥–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  - `breakout_v1_ultra_relaxed.json` - —É–ª—å—Ç—Ä–∞-–º—è–≥–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## üîß **–í–ù–ï–°–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø**

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RiskManager** (`breakout_bot/risk/risk_manager.py`)
```python
# –°—Ç—Ä–æ–∫–∞ 224: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
self.portfolio_high_water_mark: float = 0.0

# –°—Ç—Ä–æ–∫–∏ 304-305: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ä–∞—Å—á–µ—Ç max_drawdown
max_drawdown = max(0, (self.portfolio_high_water_mark - account_equity) / 
                  self.portfolio_high_water_mark) if self.portfolio_high_water_mark > 0 else 0
```

### 2. **–°–æ–∑–¥–∞–Ω–∏–µ –º—è–≥–∫–∏—Ö –ø—Ä–µ—Å–µ—Ç–æ–≤**
- **breakout_v1_relaxed.json:** –£–º–µ—Ä–µ–Ω–Ω–æ –º—è–≥–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **breakout_v1_ultra_relaxed.json:** –£–ª—å—Ç—Ä–∞-–º—è–≥–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## üìä **–¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°**

### ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- Kill switch –±–æ–ª—å—à–µ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –°–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- –°–æ–∑–¥–∞–Ω—ã –±–æ–ª–µ–µ –º—è–≥–∫–∏–µ –ø—Ä–µ—Å–µ—Ç—ã

### ‚ùì **–û—Å—Ç–∞–µ—Ç—Å—è –Ω–µ—è—Å–Ω—ã–º:**
- –ü–æ—á–µ–º—É —Å–∏—Å—Ç–µ–º–∞ –≤—Å–µ –µ—â–µ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª—ã –¥–∞–∂–µ —Å —É–ª—å—Ç—Ä–∞-–º—è–≥–∫–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ –≤ –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö (—Å–∫–∞–Ω–µ—Ä, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–∏–≥–Ω–∞–ª–æ–≤)

## üîç **–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –°–ò–ì–ù–ê–õ–û–í**

### **–õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:**
```
DEBUG: Scan result for W/USDT:USDT failed filters, skipping signal generation
DEBUG: Momentum conditions not met for WLFI/USDT:USDT: ['price_breakout', 'volume_surge', 'body_ratio', 'l2_imbalance']
DEBUG: Retest conditions not met for WLFI/USDT:USDT: ['level_retest', 'pierce_tolerance', 'l2_imbalance']
```

### **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. **–§–∏–ª—å—Ç—Ä—ã –≤—Å–µ –µ—â–µ —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–µ** - –¥–∞–∂–µ —É–ª—å—Ç—Ä–∞-–º—è–≥–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç
2. **–ü—Ä–æ–±–ª–µ–º–∞ –≤ –¥–∞–Ω–Ω—ã—Ö** - —Ä—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º
3. **–ü—Ä–æ–±–ª–µ–º–∞ –≤ –ª–æ–≥–∏–∫–µ —Å–∫–∞–Ω–µ—Ä–∞** - —Å–∫–∞–Ω–µ—Ä –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Ä—ã–Ω–∫–∏
4. **–ü—Ä–æ–±–ª–µ–º–∞ –≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–µ —Å–∏–≥–Ω–∞–ª–æ–≤** - —É—Å–ª–æ–≤–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–µ

## üéØ **–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò**

### 1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**
- ‚úÖ Kill switch –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –º—è–≥–∫–∏–µ –ø—Ä–µ—Å–µ—Ç—ã
- üîÑ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `breakout_v1_ultra_relaxed`

### 2. **–î–∞–ª—å–Ω–µ–π—à–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–∫–∞–Ω–µ—Ä–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤
- –í–æ–∑–º–æ–∂–Ω–æ, —Å–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º —Å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–∏–≥–Ω–∞–ª–æ–≤

### 3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ —Å–∏—Å—Ç–µ–º—ã
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å, –ø–æ—è–≤–ª—è—é—Ç—Å—è –ª–∏ —Å–∏–≥–Ω–∞–ª—ã —Å —Ç–µ—á–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏
- –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å, –∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ —Ñ–∏–ª—å—Ç—Ä—ã —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç

## üìà **–†–ï–ó–£–õ–¨–¢–ê–¢**

**–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ (kill switch) —Ä–µ—à–µ–Ω–∞!** –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã –±–µ–∑ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π kill switch. –û—Å—Ç–∞–µ—Ç—Å—è –≤—ã—è—Å–Ω–∏—Ç—å, –ø–æ—á–µ–º—É —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª—ã –¥–∞–∂–µ —Å –æ—á–µ–Ω—å –º—è–≥–∫–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏.

