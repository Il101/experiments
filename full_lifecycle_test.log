
======================================================================
🚀 FULL POSITION LIFECYCLE TEST - STARTING
======================================================================
2025-10-03 16:10:36,312 - breakout_bot.utils.monitoring_manager - INFO - MonitoringManager initialized
2025-10-03 16:10:36,312 - breakout_bot.utils.monitoring_manager - INFO - __init__:41 - MonitoringManager initialized
2025-10-03 16:10:36,312 | INFO     | MonitoringManager initialized
2025-10-03 16:10:36,312 - breakout_bot.core.engine - INFO - OptimizedOrchestraEngine initialized with preset: breakout_v1_working
2025-10-03 16:10:36,312 - breakout_bot.core.engine - INFO - __init__:169 - OptimizedOrchestraEngine initialized with preset: breakout_v1_working
2025-10-03 16:10:36,312 | INFO     | OptimizedOrchestraEngine initialized with preset: breakout_v1_working
2025-10-03 16:10:36,312 - breakout_bot.core.engine - INFO - Trading mode: paper
2025-10-03 16:10:36,312 - breakout_bot.core.engine - INFO - __init__:170 - Trading mode: paper
2025-10-03 16:10:36,312 | INFO     | Trading mode: paper
2025-10-03 16:10:36,312 - breakout_bot.core.state_machine - INFO - StateMachine initialized with state: initializing
2025-10-03 16:10:36,312 - breakout_bot.core.state_machine - INFO - __init__:158 - StateMachine initialized with state: initializing
2025-10-03 16:10:36,312 | INFO     | StateMachine initialized with state: initializing
2025-10-03 16:10:36,312 - breakout_bot.exchange.exchange_client - INFO - ExchangeClient.__init__ - config.paper_mode: True, self.paper_mode: True
2025-10-03 16:10:36,312 - breakout_bot.exchange.exchange_client - INFO - __init__:334 - ExchangeClient.__init__ - config.paper_mode: True, self.paper_mode: True
2025-10-03 16:10:36,312 | INFO     | ExchangeClient.__init__ - config.paper_mode: True, self.paper_mode: True
2025-10-03 16:10:36,312 - breakout_bot.exchange.exchange_client - INFO - Инициализирован BybitRateLimiter для управления rate limits
2025-10-03 16:10:36,312 - breakout_bot.exchange.exchange_client - INFO - __init__:345 - Инициализирован BybitRateLimiter для управления rate limits
2025-10-03 16:10:36,312 | INFO     | Инициализирован BybitRateLimiter для управления rate limits
2025-10-03 16:10:36,312 - breakout_bot.exchange.exchange_client - INFO - Применена оптимизированная конфигурация для Bybit API
2025-10-03 16:10:36,312 - breakout_bot.exchange.exchange_client - INFO - _get_exchange_config:404 - Применена оптимизированная конфигурация для Bybit API
2025-10-03 16:10:36,312 | INFO     | Применена оптимизированная конфигурация для Bybit API
2025-10-03 16:10:36,312 - breakout_bot.exchange.exchange_client - INFO - _get_exchange_config - api_key exists: False, api_secret exists: False
2025-10-03 16:10:36,312 - breakout_bot.exchange.exchange_client - INFO - _get_exchange_config:409 - _get_exchange_config - api_key exists: False, api_secret exists: False
2025-10-03 16:10:36,312 | INFO     | _get_exchange_config - api_key exists: False, api_secret exists: False
2025-10-03 16:10:36,312 - breakout_bot.exchange.exchange_client - INFO - Initialized paper trading with $100,000 balance
2025-10-03 16:10:36,312 - breakout_bot.exchange.exchange_client - INFO - __init__:157 - Initialized paper trading with $100,000 balance
2025-10-03 16:10:36,312 | INFO     | Initialized paper trading with $100,000 balance
2025-10-03 16:10:36,312 - breakout_bot.exchange.exchange_client - INFO - Initialized in PAPER TRADING mode with live market data
2025-10-03 16:10:36,312 - breakout_bot.exchange.exchange_client - INFO - __init__:359 - Initialized in PAPER TRADING mode with live market data
2025-10-03 16:10:36,312 | INFO     | Initialized in PAPER TRADING mode with live market data
2025-10-03 16:10:36,312 - breakout_bot.scanner.market_scanner - INFO - Initialized scanner with preset: breakout_v1_working
2025-10-03 16:10:36,312 - breakout_bot.scanner.market_scanner - INFO - __init__:410 - Initialized scanner with preset: breakout_v1_working
2025-10-03 16:10:36,312 | INFO     | Initialized scanner with preset: breakout_v1_working
2025-10-03 16:10:36,312 - breakout_bot.signals.signal_generator - INFO - Initialized signal generator with preset: breakout_v1_working
2025-10-03 16:10:36,312 - breakout_bot.signals.signal_generator - INFO - __init__:667 - Initialized signal generator with preset: breakout_v1_working
2025-10-03 16:10:36,312 | INFO     | Initialized signal generator with preset: breakout_v1_working
2025-10-03 16:10:36,312 - breakout_bot.signals.signal_generator - INFO - Primary strategy: momentum
2025-10-03 16:10:36,312 - breakout_bot.signals.signal_generator - INFO - __init__:668 - Primary strategy: momentum
2025-10-03 16:10:36,312 | INFO     | Primary strategy: momentum
2025-10-03 16:10:36,312 - breakout_bot.risk.risk_manager - INFO - Initialized risk manager with preset: breakout_v1_working
2025-10-03 16:10:36,312 - breakout_bot.risk.risk_manager - INFO - __init__:477 - Initialized risk manager with preset: breakout_v1_working
2025-10-03 16:10:36,312 | INFO     | Initialized risk manager with preset: breakout_v1_working
2025-10-03 16:10:36,312 - breakout_bot.risk.risk_manager - INFO - Risk per trade: 1.5%
2025-10-03 16:10:36,312 - breakout_bot.risk.risk_manager - INFO - __init__:478 - Risk per trade: 1.5%
2025-10-03 16:10:36,312 | INFO     | Risk per trade: 1.5%
2025-10-03 16:10:36,312 - breakout_bot.risk.risk_manager - INFO - Max positions: 3
2025-10-03 16:10:36,312 - breakout_bot.risk.risk_manager - INFO - __init__:479 - Max positions: 3
2025-10-03 16:10:36,312 | INFO     | Max positions: 3
2025-10-03 16:10:36,312 - breakout_bot.position.position_manager - INFO - Initialized position manager with preset: breakout_v1_working
2025-10-03 16:10:36,312 - breakout_bot.position.position_manager - INFO - __init__:239 - Initialized position manager with preset: breakout_v1_working
2025-10-03 16:10:36,312 | INFO     | Initialized position manager with preset: breakout_v1_working
2025-10-03 16:10:36,312 - breakout_bot.core.engine - INFO - Initializing trading system components...
2025-10-03 16:10:36,312 - breakout_bot.core.engine - INFO - initialize:221 - Initializing trading system components...
2025-10-03 16:10:36,312 | INFO     | Initializing trading system components...
2025-10-03 16:10:36,312 - breakout_bot.exchange.exchange_client - INFO - ExchangeClient.__init__ - config.paper_mode: True, self.paper_mode: True
2025-10-03 16:10:36,312 - breakout_bot.exchange.exchange_client - INFO - __init__:334 - ExchangeClient.__init__ - config.paper_mode: True, self.paper_mode: True
2025-10-03 16:10:36,312 | INFO     | ExchangeClient.__init__ - config.paper_mode: True, self.paper_mode: True
2025-10-03 16:10:36,312 - breakout_bot.exchange.exchange_client - INFO - Инициализирован BybitRateLimiter для управления rate limits
2025-10-03 16:10:36,312 - breakout_bot.exchange.exchange_client - INFO - __init__:345 - Инициализирован BybitRateLimiter для управления rate limits
2025-10-03 16:10:36,312 | INFO     | Инициализирован BybitRateLimiter для управления rate limits
2025-10-03 16:10:36,312 - breakout_bot.exchange.exchange_client - INFO - Применена оптимизированная конфигурация для Bybit API
2025-10-03 16:10:36,312 - breakout_bot.exchange.exchange_client - INFO - _get_exchange_config:404 - Применена оптимизированная конфигурация для Bybit API
2025-10-03 16:10:36,312 | INFO     | Применена оптимизированная конфигурация для Bybit API
2025-10-03 16:10:36,313 - breakout_bot.exchange.exchange_client - INFO - _get_exchange_config - api_key exists: False, api_secret exists: False
2025-10-03 16:10:36,313 - breakout_bot.exchange.exchange_client - INFO - _get_exchange_config:409 - _get_exchange_config - api_key exists: False, api_secret exists: False
2025-10-03 16:10:36,313 | INFO     | _get_exchange_config - api_key exists: False, api_secret exists: False
2025-10-03 16:10:36,313 - breakout_bot.exchange.exchange_client - INFO - Initialized paper trading with $100,000 balance
2025-10-03 16:10:36,313 - breakout_bot.exchange.exchange_client - INFO - __init__:157 - Initialized paper trading with $100,000 balance
2025-10-03 16:10:36,313 | INFO     | Initialized paper trading with $100,000 balance
2025-10-03 16:10:36,313 - breakout_bot.exchange.exchange_client - INFO - Initialized in PAPER TRADING mode with live market data
2025-10-03 16:10:36,313 - breakout_bot.exchange.exchange_client - INFO - __init__:359 - Initialized in PAPER TRADING mode with live market data
2025-10-03 16:10:36,313 | INFO     | Initialized in PAPER TRADING mode with live market data
2025-10-03 16:10:36,313 - breakout_bot.core.engine - INFO - Paper trading mode: starting equity set to $100,000.00
2025-10-03 16:10:36,313 - breakout_bot.core.engine - INFO - initialize:233 - Paper trading mode: starting equity set to $100,000.00
2025-10-03 16:10:36,313 | INFO     | Paper trading mode: starting equity set to $100,000.00
2025-10-03 16:10:36,313 - breakout_bot.scanner.market_scanner - INFO - Initialized scanner with preset: breakout_v1_working
2025-10-03 16:10:36,313 - breakout_bot.scanner.market_scanner - INFO - __init__:410 - Initialized scanner with preset: breakout_v1_working
2025-10-03 16:10:36,313 | INFO     | Initialized scanner with preset: breakout_v1_working
2025-10-03 16:10:36,313 - breakout_bot.signals.signal_generator - INFO - Initialized signal generator with preset: breakout_v1_working
2025-10-03 16:10:36,313 - breakout_bot.signals.signal_generator - INFO - __init__:667 - Initialized signal generator with preset: breakout_v1_working
2025-10-03 16:10:36,313 | INFO     | Initialized signal generator with preset: breakout_v1_working
2025-10-03 16:10:36,313 - breakout_bot.signals.signal_generator - INFO - Primary strategy: momentum
2025-10-03 16:10:36,313 - breakout_bot.signals.signal_generator - INFO - __init__:668 - Primary strategy: momentum
2025-10-03 16:10:36,313 | INFO     | Primary strategy: momentum
2025-10-03 16:10:36,313 - breakout_bot.risk.risk_manager - INFO - Initialized risk manager with preset: breakout_v1_working
2025-10-03 16:10:36,313 - breakout_bot.risk.risk_manager - INFO - __init__:477 - Initialized risk manager with preset: breakout_v1_working
2025-10-03 16:10:36,313 | INFO     | Initialized risk manager with preset: breakout_v1_working
2025-10-03 16:10:36,313 - breakout_bot.risk.risk_manager - INFO - Risk per trade: 1.5%
2025-10-03 16:10:36,313 - breakout_bot.risk.risk_manager - INFO - __init__:478 - Risk per trade: 1.5%
2025-10-03 16:10:36,313 | INFO     | Risk per trade: 1.5%
2025-10-03 16:10:36,313 - breakout_bot.risk.risk_manager - INFO - Max positions: 3
2025-10-03 16:10:36,313 - breakout_bot.risk.risk_manager - INFO - __init__:479 - Max positions: 3
2025-10-03 16:10:36,313 | INFO     | Max positions: 3
2025-10-03 16:10:36,313 - breakout_bot.position.position_manager - INFO - Initialized position manager with preset: breakout_v1_working
2025-10-03 16:10:36,313 - breakout_bot.position.position_manager - INFO - __init__:239 - Initialized position manager with preset: breakout_v1_working
2025-10-03 16:10:36,313 | INFO     | Initialized position manager with preset: breakout_v1_working
2025-10-03 16:10:36,313 - breakout_bot.core.engine - INFO - Initializing enhanced market microstructure components...
2025-10-03 16:10:36,313 - breakout_bot.core.engine - INFO - initialize:246 - Initializing enhanced market microstructure components...
2025-10-03 16:10:36,313 | INFO     | Initializing enhanced market microstructure components...
2025-10-03 16:10:36,313 - breakout_bot.data.streams.trades_ws - INFO - TradesAggregator initialized
2025-10-03 16:10:36,313 - breakout_bot.data.streams.trades_ws - INFO - __init__:130 - TradesAggregator initialized
2025-10-03 16:10:36,313 | INFO     | TradesAggregator initialized
2025-10-03 16:10:36,313 - breakout_bot.data.streams.orderbook_ws - INFO - OrderBookManager initialized
2025-10-03 16:10:36,313 - breakout_bot.data.streams.orderbook_ws - INFO - __init__:89 - OrderBookManager initialized
2025-10-03 16:10:36,313 | INFO     | OrderBookManager initialized
2025-10-03 16:10:36,313 - breakout_bot.features.density - INFO - DensityDetector initialized: k=7.0, bucket_ticks=3, eat_ratio=0.75
2025-10-03 16:10:36,313 - breakout_bot.features.density - INFO - __init__:87 - DensityDetector initialized: k=7.0, bucket_ticks=3, eat_ratio=0.75
2025-10-03 16:10:36,313 | INFO     | DensityDetector initialized: k=7.0, bucket_ticks=3, eat_ratio=0.75
2025-10-03 16:10:36,313 - breakout_bot.features.activity - INFO - ActivityTracker initialized: lookback=60, drop_threshold=0.4
2025-10-03 16:10:36,313 - breakout_bot.features.activity - INFO - __init__:68 - ActivityTracker initialized: lookback=60, drop_threshold=0.4
2025-10-03 16:10:36,313 | INFO     | ActivityTracker initialized: lookback=60, drop_threshold=0.4
2025-10-03 16:10:36,313 - breakout_bot.core.engine - INFO - Enhanced market microstructure components initialized
2025-10-03 16:10:36,313 - breakout_bot.core.engine - INFO - initialize:282 - Enhanced market microstructure components initialized
2025-10-03 16:10:36,313 | INFO     | Enhanced market microstructure components initialized
2025-10-03 16:10:36,313 - breakout_bot.core.state_machine - INFO - StateMachine initialized with state: initializing
2025-10-03 16:10:36,313 - breakout_bot.core.state_machine - INFO - __init__:158 - StateMachine initialized with state: initializing
2025-10-03 16:10:36,313 | INFO     | StateMachine initialized with state: initializing
2025-10-03 16:10:36,313 - breakout_bot.core.error_handler - INFO - ErrorHandler initialized
2025-10-03 16:10:36,313 - breakout_bot.core.error_handler - INFO - __init__:198 - ErrorHandler initialized
2025-10-03 16:10:36,313 | INFO     | ErrorHandler initialized
2025-10-03 16:10:36,313 - breakout_bot.core.scanning_manager - INFO - ScanningManager initialized
2025-10-03 16:10:36,313 - breakout_bot.core.scanning_manager - INFO - __init__:85 - ScanningManager initialized
2025-10-03 16:10:36,313 | INFO     | ScanningManager initialized
2025-10-03 16:10:36,313 - breakout_bot.core.signal_manager - INFO - SignalManager initialized
2025-10-03 16:10:36,313 - breakout_bot.core.signal_manager - INFO - __init__:85 - SignalManager initialized
2025-10-03 16:10:36,313 | INFO     | SignalManager initialized
2025-10-03 16:10:36,313 - breakout_bot.utils.resource_monitor - INFO - Resource monitor initialized
2025-10-03 16:10:36,313 - breakout_bot.utils.resource_monitor - INFO - __init__:92 - Resource monitor initialized
2025-10-03 16:10:36,313 | INFO     | Resource monitor initialized
2025-10-03 16:10:36,313 - breakout_bot.core.resource_manager - INFO - ResourceManager initialized
2025-10-03 16:10:36,313 - breakout_bot.core.resource_manager - INFO - __init__:74 - ResourceManager initialized
2025-10-03 16:10:36,313 | INFO     | ResourceManager initialized
2025-10-03 16:10:36,313 - breakout_bot.core.trading_orchestrator - INFO - TradingOrchestrator initialized
2025-10-03 16:10:36,313 - breakout_bot.core.trading_orchestrator - INFO - __init__:91 - TradingOrchestrator initialized
2025-10-03 16:10:36,313 | INFO     | TradingOrchestrator initialized
2025-10-03 16:10:36,313 - breakout_bot.core.engine - INFO - All components initialized successfully
2025-10-03 16:10:36,313 - breakout_bot.core.engine - INFO - initialize:340 - All components initialized successfully
2025-10-03 16:10:36,313 | INFO     | All components initialized successfully
2025-10-03 16:10:36,313 - breakout_bot.core.state_machine - INFO - State transition: initializing -> scanning (Initialization complete)
2025-10-03 16:10:36,313 - breakout_bot.core.state_machine - INFO - transition_to:237 - State transition: initializing -> scanning (Initialization complete)
2025-10-03 16:10:36,313 | INFO     | State transition: initializing -> scanning (Initialization complete)
2025-10-03 16:10:36,313 - breakout_bot - INFO - [state_machine] State transition: initializing -> scanning
2025-10-03 16:10:36,313 - breakout_bot - INFO - _log:138 - [state_machine] State transition: initializing -> scanning
2025-10-03 16:10:36,313 | INFO     | [state_machine] State transition: initializing -> scanning
✅ Engine initialized
💰 Capital: $100,000.00


======================================================================
STEP 1: OPENING POSITION (Forced Signal)
======================================================================
📝 Forced signal created:
   Symbol: BTC/USDT:USDT
   Entry: $120,000.00
   SL: $119,000.00 (Risk: $1,000.00)
   TP1: $122,000.00 (2R)
   TP2: $123,500.00 (3.5R)
2025-10-03 16:10:36,313 | ERROR    | Test failed with exception: 'SignalManager' object has no attribute 'add_signal'
Traceback (most recent call last):
  File "/Users/iliazarikov/Documents/Python_crypto/Barahlo/experiments/test_full_lifecycle.py", line 370, in run_all_steps
    if not await self.step1_open_position():
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/iliazarikov/Documents/Python_crypto/Barahlo/experiments/test_full_lifecycle.py", line 91, in step1_open_position
    await self.engine.signal_manager.add_signal(forced_signal)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'SignalManager' object has no attribute 'add_signal'
2025-10-03 16:10:36,314 - breakout_bot.core.resource_manager - INFO - Starting resource monitoring...
2025-10-03 16:10:36,314 - breakout_bot.core.resource_manager - INFO - start_monitoring:78 - Starting resource monitoring...
2025-10-03 16:10:36,314 | INFO     | Starting resource monitoring...
